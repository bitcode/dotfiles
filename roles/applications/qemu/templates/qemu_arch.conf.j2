# QEMU {{ item }} Architecture Configuration
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

[{{ item }}]
# System emulator
system_emulator = {{ qemu_config.system_emulators[item] }}

# User emulator
user_emulator = {{ qemu_config.user_emulators[item] }}

# Default memory
memory = {{ qemu_config.default_memory[item] }}

# Machine type
{% if ansible_os_family == "Darwin" %}
machine_type = {{ qemu_macos_options.machine_types[item] | default('virt') }}
{% else %}
machine_type = {{ (qemu_debian_options.machine_types | default(qemu_archlinux_options.machine_types))[item] | default('virt') }}
{% endif %}

# Architecture-specific options
{% if item == 'arm64' %}
cpu = cortex-a57
{% elif item == 'arm32' %}
cpu = cortex-a15
{% elif item == 'x86_64' %}
cpu = qemu64
{% elif item in ['riscv64', 'riscv32'] %}
cpu = rv64
{% endif %}

# Debugging configuration
gdb_port = {{ 1234 + loop.index0 | default(1234) }}
monitor_port = {{ 4444 + loop.index0 | default(4444) }}

# Boot options
kernel_cmdline = "console=ttyAMA0 earlycon=pl011,0x9000000"