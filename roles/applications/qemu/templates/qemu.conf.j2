# QEMU Configuration File
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

[global]
# QEMU installation path
qemu_path = {{ qemu_path | default('/usr/bin') }}

# Default memory sizes
{% for arch in qemu_config.architectures %}
memory_{{ arch }} = {{ qemu_config.default_memory[arch] }}
{% endfor %}

# Common QEMU options
common_options = {{ qemu_config.common_options | join(' ') }}

# GDB debugging options
gdb_options = {{ qemu_config.gdb_options | join(' ') }}

[emulators]
# System emulators
{% for arch, emulator in qemu_config.system_emulators.items() %}
system_{{ arch }} = {{ emulator }}
{% endfor %}

# User emulators
{% for arch, emulator in qemu_config.user_emulators.items() %}
user_{{ arch }} = {{ emulator }}
{% endfor %}

[acceleration]
{% if ansible_os_family == "Darwin" %}
# macOS Hypervisor.framework
hvf_available = true
hvf_options = {{ qemu_macos_options.hvf_acceleration | join(' ') }}
{% else %}
# KVM acceleration (Linux)
kvm_available = true
kvm_options = {{ qemu_debian_options.kvm_acceleration | default(qemu_archlinux_options.kvm_acceleration) | join(' ') }}
{% endif %}

[machine_types]
{% if ansible_os_family == "Darwin" %}
{% for arch, machine in qemu_macos_options.machine_types.items() %}
{{ arch }} = {{ machine }}
{% endfor %}
{% else %}
{% for arch, machine in (qemu_debian_options.machine_types | default(qemu_archlinux_options.machine_types)).items() %}
{{ arch }} = {{ machine }}
{% endfor %}
{% endif %}

[paths]
config_dir = {{ qemu_paths.config_dir }}
scripts_dir = {{ qemu_paths.scripts_dir }}
examples_dir = {{ qemu_paths.examples_dir }}